const a1_0x65c0=['throw','CloudRemoteCache','skipNxCache','next','printCacheHitsMessage','error','MessageReporter','./cloud-enabled-life-cycle','maskedProperties','../../api/error-reporter.api','AGENT_RUNNING_IN_DISTRIBUTED_EXECUTION','cloudEnabledTasksRunner','encryptionKey','exit','note','CloudEnabledLifeCycle','obfuscate','env','complete','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','ErrorReporterApi','value','Agent\x20wasn\x27t\x20able\x20to\x20record\x20its\x20run','getBranch','getMachineInfo','rxjs/internal/Subject','catch','__awaiter','forEach','E2EEncryption','__esModule','../../file-storage/file-storage','Agent\x20wasn\x27t\x20able\x20to\x20store\x20artifacts','cacheableOperations','VERBOSE_LOGGING','FileStorage','endRun','./cloud-remote-cache','join','DISTRIBUTED_TASK_EXECUTION_INTERNAL_ERROR_STATUS_CODE','Executed\x20tasks\x20with\x20hashes:\x20','cacheDirectory','getRunGroup','startRun','stringify','./node_modules/.cache/nx','assign','map','taskId','EndOfRunMessage','defineProperty','subscribe','lifeCycle','then','printMessages','parseCommand','done','../../../utilities/nx-imports','anyErrors','path','../../file-storage/e2e-encryption','scan','filter','hash','OutputObfuscator','tasks-hashes-','apply'];(function(_0x38011e,_0x65c05d){const _0x448c36=function(_0x15a8e3){while(--_0x15a8e3){_0x38011e['push'](_0x38011e['shift']());}};_0x448c36(++_0x65c05d);}(a1_0x65c0,0x72));const a1_0x448c=function(_0x38011e,_0x65c05d){_0x38011e=_0x38011e-0x0;let _0x448c36=a1_0x65c0[_0x38011e];return _0x448c36;};'use strict';var __awaiter=this&&this[a1_0x448c('0x2f')]||function(_0xbf4e04,_0x1ba017,_0x51b7e8,_0x5c8ab9){function _0x39ebb4(_0x445241){return _0x445241 instanceof _0x51b7e8?_0x445241:new _0x51b7e8(function(_0x4448e5){_0x4448e5(_0x445241);});}return new(_0x51b7e8||(_0x51b7e8=Promise))(function(_0x4d10d3,_0x588665){function _0x405001(_0x445338){try{_0x4f194c(_0x5c8ab9[a1_0x448c('0x17')](_0x445338));}catch(_0x557412){_0x588665(_0x557412);}}function _0x4c6a85(_0x1c0c63){try{_0x4f194c(_0x5c8ab9[a1_0x448c('0x14')](_0x1c0c63));}catch(_0x23b55a){_0x588665(_0x23b55a);}}function _0x4f194c(_0x53511f){_0x53511f[a1_0x448c('0x9')]?_0x4d10d3(_0x53511f['value']):_0x39ebb4(_0x53511f[a1_0x448c('0x29')])[a1_0x448c('0x6')](_0x405001,_0x4c6a85);}_0x4f194c((_0x5c8ab9=_0x5c8ab9[a1_0x448c('0x13')](_0xbf4e04,_0x1ba017||[]))['next']());});};Object[a1_0x448c('0x3')](exports,a1_0x448c('0x32'),{'value':!![]});exports[a1_0x448c('0x1f')]=void 0x0;const message_reporter_1=require('../../terminal-output/message-reporter');const end_of_run_message_1=require('../../terminal-output/end-of-run-message');const output_obfuscator_1=require('../../terminal-output/output-obfuscator');const cloud_enabled_life_cycle_1=require(a1_0x448c('0x1b'));const file_storage_1=require(a1_0x448c('0x33'));const e2e_encryption_1=require(a1_0x448c('0xd'));const environment_1=require('../../../utilities/environment');const cloud_remote_cache_1=require(a1_0x448c('0x39'));const cloud_run_api_1=require('./cloud-run.api');const fs_1=require('fs');const path=require(a1_0x448c('0xc'));const metric_logger_1=require('../../../utilities/metric-logger');const error_reporter_api_1=require(a1_0x448c('0x1d'));const {tasksRunner,output}=require(a1_0x448c('0xa'));function createApi(_0x57fdd2,_0x3d7a0e,_0x42ed63){const _0x3ef726=(0x0,environment_1[a1_0x448c('0x2c')])(_0x3d7a0e);return new cloud_run_api_1['CloudRunApi'](_0x57fdd2,_0x42ed63,_0x3d7a0e,_0x3ef726);}function storeTaskHashes(_0x406a10,_0x5688c5,_0x1cbe8b){const _0x445149=JSON[a1_0x448c('0x40')](_0x406a10['map'](_0x49019f=>({'taskId':_0x49019f[a1_0x448c('0x1')],'hash':_0x49019f[a1_0x448c('0x10')]})));if(environment_1[a1_0x448c('0x36')]){output[a1_0x448c('0x22')]({'title':a1_0x448c('0x3c')+_0x445149});}(0x0,fs_1['writeFileSync'])(path[a1_0x448c('0x3a')](_0x5688c5,a1_0x448c('0x12')+_0x1cbe8b),_0x445149);}function onComplete(_0x2a8f4d,_0x5b8b9e,_0x80810a,_0x32eedb,_0x29ba07,_0x46830a,_0x39f055,_0x4a4b57,_0x208e3f,_0x54bbbb,_0x401dc9){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4a3286=new Date()['toISOString']();if(environment_1[a1_0x448c('0x1e')]){storeTaskHashes(_0x208e3f,_0x5b8b9e['cacheDirectory']||a1_0x448c('0x41'),environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_ID']);}const _0x43617d=(0x0,environment_1[a1_0x448c('0x2b')])();const _0xea59d0=yield Promise['all']([_0x80810a['waitForStoreRequestsToComplete'](),_0x32eedb[a1_0x448c('0x38')]({'command':_0x29ba07[a1_0x448c('0x24')]((0x0,environment_1[a1_0x448c('0x8')])()),'startTime':_0x46830a,'endTime':_0x4a3286,'distributedExecutionId':environment_1[a1_0x448c('0x27')],'branch':_0x43617d,'scan':!![],'runGroup':(0x0,environment_1[a1_0x448c('0x3e')])(),'sha':_0x43617d?(0x0,environment_1['extractGitSha'])():undefined,'inner':_0x401dc9},_0x208e3f)]);if(_0x54bbbb){setTimeout(()=>{_0x39f055[a1_0x448c('0x7')]();if(!_0x39f055[a1_0x448c('0xb')]&&!_0x401dc9){_0x4a4b57[a1_0x448c('0x18')]();}},0x0);}else{_0x39f055[a1_0x448c('0x7')]();if(!_0x39f055[a1_0x448c('0xb')]&&!_0x401dc9){_0x4a4b57['printCacheHitsMessage']();}}if(environment_1[a1_0x448c('0x1e')]){if(!_0xea59d0[0x0]){output[a1_0x448c('0x19')]({'title':a1_0x448c('0x34')});_0x39f055[a1_0x448c('0x7')]();process[a1_0x448c('0x21')](environment_1[a1_0x448c('0x3b')]);}if(!_0xea59d0[0x1]){output[a1_0x448c('0x19')]({'title':a1_0x448c('0x2a')});_0x39f055['printMessages']();process[a1_0x448c('0x21')](environment_1[a1_0x448c('0x3b')]);}}yield(0x0,metric_logger_1['submitRunMetrics'])(_0x5b8b9e);});}function createLifeCycle(_0x326076,_0x13bbf2,_0x3bb284,_0x5921de){const _0x58d082=new cloud_enabled_life_cycle_1[(a1_0x448c('0x23'))](_0x326076,_0x13bbf2[a1_0x448c('0x3d')],!!_0x13bbf2[a1_0x448c('0x16')],_0x13bbf2[a1_0x448c('0xe')]===undefined?!![]:_0x13bbf2['scan'],_0x13bbf2[a1_0x448c('0x35')]||[],_0x3bb284,_0x5921de);try{const {CompositeLifeCycle}=require(a1_0x448c('0xa'));if(!CompositeLifeCycle)return _0x58d082;return new CompositeLifeCycle([_0x13bbf2[a1_0x448c('0x5')],_0x58d082]);}catch(_0x25df5d){return _0x58d082;}}function cloudEnabledTasksRunner(_0x5e4fc6,_0x47b1a7,_0x17fb77,_0x4a69a6=![]){const _0x7f6e93={'statuses':{},'scheduledTasks':[],'requests':{},'allTasks':_0x5e4fc6};const _0x47f534=_0x47b1a7[a1_0x448c('0x5')]===undefined;const _0x385a05=[];const _0x35dacb=new message_reporter_1[(a1_0x448c('0x1a'))](_0x47b1a7);const _0x256995=createApi(_0x35dacb,_0x47b1a7,_0x7f6e93);const _0x5eda78=new end_of_run_message_1[(a1_0x448c('0x2'))](_0x7f6e93,_0x385a05);const _0x36c05e=new output_obfuscator_1[(a1_0x448c('0x11'))](_0x47b1a7[a1_0x448c('0x1c')]);const _0x3311ed=_0x5e4fc6[a1_0x448c('0x0')](_0x73b72=>_0x73b72['hash'])[a1_0x448c('0xf')](_0x33eba6=>!!_0x33eba6);const _0x4aa1fc=_0x256995[a1_0x448c('0x3f')](environment_1[a1_0x448c('0x27')],_0x3311ed);_0x3311ed[a1_0x448c('0x30')](_0x1e47c3=>{_0x7f6e93['requests'][_0x1e47c3]=_0x4aa1fc;});const _0x4c87ae=new Date()['toISOString']();const _0x3d798b=createLifeCycle(_0x7f6e93,_0x47b1a7,_0x36c05e,_0x385a05);const _0x2c6f6d=new e2e_encryption_1[(a1_0x448c('0x31'))](environment_1['ENCRYPTION_KEY']||_0x47b1a7[a1_0x448c('0x20')]);const _0x51c152=new error_reporter_api_1[(a1_0x448c('0x28'))](_0x47b1a7);const _0x5dd017=new file_storage_1[(a1_0x448c('0x37'))](_0x2c6f6d,_0x51c152,![]);const _0x184768=new cloud_remote_cache_1[(a1_0x448c('0x15'))](_0x35dacb,_0x256995,_0x7f6e93,_0x5dd017);delete process[a1_0x448c('0x25')][a1_0x448c('0x27')];const _0x3935ee=tasksRunner(_0x5e4fc6,Object['assign'](Object[a1_0x448c('0x42')]({},_0x47b1a7),{'remoteCache':_0x184768,'lifeCycle':_0x3d798b}),_0x17fb77);if(_0x3935ee[a1_0x448c('0x4')]){const {Subject}=require(a1_0x448c('0x2d'));const _0x42e01c=new Subject();_0x3935ee[a1_0x448c('0x4')]({'next':_0x4d040b=>_0x42e01c[a1_0x448c('0x17')](_0x4d040b),'error':_0x59b1ec=>_0x42e01c[a1_0x448c('0x19')](_0x59b1ec),'complete':()=>__awaiter(this,void 0x0,void 0x0,function*(){yield onComplete(_0x3d798b,_0x47b1a7,_0x184768,_0x256995,_0x36c05e,_0x4c87ae,_0x35dacb,_0x5eda78,_0x385a05,_0x47f534,_0x4a69a6);_0x42e01c[a1_0x448c('0x26')]();})});return _0x42e01c;}else{return _0x3935ee[a1_0x448c('0x6')](_0x2ff8e1=>__awaiter(this,void 0x0,void 0x0,function*(){yield onComplete(_0x3d798b,_0x47b1a7,_0x184768,_0x256995,_0x36c05e,_0x4c87ae,_0x35dacb,_0x5eda78,_0x385a05,_0x47f534,_0x4a69a6);return _0x2ff8e1;}))[a1_0x448c('0x2e')](_0x26b44f=>__awaiter(this,void 0x0,void 0x0,function*(){yield onComplete(_0x3d798b,_0x47b1a7,_0x184768,_0x256995,_0x36c05e,_0x4c87ae,_0x35dacb,_0x5eda78,_0x385a05,_0x47f534,_0x4a69a6);throw _0x26b44f;}));}}exports[a1_0x448c('0x1f')]=cloudEnabledTasksRunner;