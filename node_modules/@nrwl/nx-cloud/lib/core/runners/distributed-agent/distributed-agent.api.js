const a4_0xfa39=['Completed\x20run\x20group\x20with\x20an\x20error','__esModule','mapRespToPerfEntry','apply','axiosException','axiosMultipleTries','post','DistributedAgentApi','VERBOSE_LOGGING','next','runGroup:\x20','apiAxiosInstance','recordMetric','agentName','RUNNER_FAILURE_PERF_ENTRY','createMetricRecorder','../../../utilities/axios','response','__awaiter','throw','completeRunGroupWithError','note','completeRunGroup','data','value','error:\x20','createApiAxiosInstance','Completing\x20run\x20group\x20with\x20an\x20error','defineProperty','runGroup','../../../utilities/environment'];(function(_0x5c83bb,_0xfa39e7){const _0x38c56c=function(_0x37c50d){while(--_0x37c50d){_0x5c83bb['push'](_0x5c83bb['shift']());}};_0x38c56c(++_0xfa39e7);}(a4_0xfa39,0x1e9));const a4_0x38c5=function(_0x5c83bb,_0xfa39e7){_0x5c83bb=_0x5c83bb-0x0;let _0x38c56c=a4_0xfa39[_0x5c83bb];return _0x38c56c;};'use strict';var __awaiter=this&&this[a4_0x38c5('0x19')]||function(_0x113252,_0xdb240b,_0x3591f1,_0x2e15d3){function _0x400a39(_0xf9ba15){return _0xf9ba15 instanceof _0x3591f1?_0xf9ba15:new _0x3591f1(function(_0x30e7c3){_0x30e7c3(_0xf9ba15);});}return new(_0x3591f1||(_0x3591f1=Promise))(function(_0x4e66fb,_0x4243e3){function _0x452aac(_0x3d0ced){try{_0x1208fb(_0x2e15d3[a4_0x38c5('0x10')](_0x3d0ced));}catch(_0xac0c03){_0x4243e3(_0xac0c03);}}function _0x2d7c1a(_0x13dfb0){try{_0x1208fb(_0x2e15d3[a4_0x38c5('0x1a')](_0x13dfb0));}catch(_0x22cfb7){_0x4243e3(_0x22cfb7);}}function _0x1208fb(_0x4d63d1){_0x4d63d1['done']?_0x4e66fb(_0x4d63d1[a4_0x38c5('0x0')]):_0x400a39(_0x4d63d1[a4_0x38c5('0x0')])['then'](_0x452aac,_0x2d7c1a);}_0x1208fb((_0x2e15d3=_0x2e15d3[a4_0x38c5('0xa')](_0x113252,_0xdb240b||[]))[a4_0x38c5('0x10')]());});};Object[a4_0x38c5('0x4')](exports,a4_0x38c5('0x8'),{'value':!![]});exports['DistributedAgentApi']=void 0x0;const axios_1=require(a4_0x38c5('0x17'));const environment_1=require(a4_0x38c5('0x6'));const metric_logger_1=require('../../../utilities/metric-logger');const {output}=require('../../../utilities/nx-imports');class DistributedAgentApi{constructor(_0x11c564,_0x23c28f,_0x56d4f5){this[a4_0x38c5('0x5')]=_0x23c28f;this['agentName']=_0x56d4f5;this[a4_0x38c5('0x12')]=(0x0,axios_1[a4_0x38c5('0x2')])(_0x11c564);}['tasks'](_0x5a17b2,_0x205782,_0x1e6008){var _0x56caa3;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x8a851c=(0x0,metric_logger_1[a4_0x38c5('0x16')])('dtePollTasks');try{const _0x1172f7=yield(0x0,axios_1[a4_0x38c5('0xc')])(()=>this[a4_0x38c5('0x12')][a4_0x38c5('0xd')]('/nx-cloud/executions/tasks',{'runGroup':this['runGroup'],'agentName':this[a4_0x38c5('0x14')],'executionId':_0x5a17b2,'statusCode':_0x205782,'completedTasks':_0x1e6008}));_0x8a851c['recordMetric']((0x0,metric_logger_1[a4_0x38c5('0x9')])(_0x1172f7));return _0x1172f7[a4_0x38c5('0x1e')];}catch(_0x5da77a){_0x8a851c['recordMetric'](((_0x56caa3=_0x5da77a===null||_0x5da77a===void 0x0?void 0x0:_0x5da77a[a4_0x38c5('0xb')])===null||_0x56caa3===void 0x0?void 0x0:_0x56caa3[a4_0x38c5('0x18')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x5da77a[a4_0x38c5('0xb')][a4_0x38c5('0x18')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x5da77a;}});}[a4_0x38c5('0x1b')](_0x2c888d){var _0x1bdf76;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a4_0x38c5('0xf')]){output[a4_0x38c5('0x1c')]({'title':a4_0x38c5('0x3'),'bodyLines':[a4_0x38c5('0x11')+this[a4_0x38c5('0x5')],a4_0x38c5('0x1')+_0x2c888d]});}const _0x5ad6cb=(0x0,metric_logger_1[a4_0x38c5('0x16')])(a4_0x38c5('0x1d'));try{const _0x321254=yield(0x0,axios_1['axiosMultipleTries'])(()=>this[a4_0x38c5('0x12')][a4_0x38c5('0xd')]('/nx-cloud/executions/complete-run-group',{'runGroup':this['runGroup'],'agentName':this[a4_0x38c5('0x14')],'criticalErrorMessage':_0x2c888d}));if(environment_1[a4_0x38c5('0xf')]){output['note']({'title':a4_0x38c5('0x7')});}_0x5ad6cb[a4_0x38c5('0x13')]((0x0,metric_logger_1[a4_0x38c5('0x9')])(_0x321254));}catch(_0x5d56c1){_0x5ad6cb[a4_0x38c5('0x13')](((_0x1bdf76=_0x5d56c1===null||_0x5d56c1===void 0x0?void 0x0:_0x5d56c1[a4_0x38c5('0xb')])===null||_0x1bdf76===void 0x0?void 0x0:_0x1bdf76[a4_0x38c5('0x18')])?(0x0,metric_logger_1[a4_0x38c5('0x9')])(_0x5d56c1['axiosException'][a4_0x38c5('0x18')]):metric_logger_1[a4_0x38c5('0x15')]);console['error'](_0x5d56c1);}});}}exports[a4_0x38c5('0xe')]=DistributedAgentApi;