const a6_0x3857=['target','message','/nx-cloud/executions/complete-run-group','__awaiter','/nx-cloud/executions/start','axiosMultipleTries','../../../utilities/environment','DistributedExecutionApi','recordMetric','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','status','../../../utilities/axios','dteStart','false','response','defineProperty','createStartRequest','next','/nx-cloud/executions/status','error','hash','../../../utilities/nx-imports','createApiAxiosInstance','apply','__esModule','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','data','parallel','createMetricRecorder','start','getBranch','agentCount','dteStatus','done','then','value','post','enabled','project','axiosException','completeRunGroup','configuration','apiAxiosInstance','../../../utilities/serializer-overrides','../../../utilities/metric-logger','mapRespToPerfEntry','maxParallel','parseCommand'];(function(_0x599e1e,_0x3857d4){const _0x2214d7=function(_0x1ae588){while(--_0x1ae588){_0x599e1e['push'](_0x599e1e['shift']());}};_0x2214d7(++_0x3857d4);}(a6_0x3857,0x1dc));const a6_0x2214=function(_0x599e1e,_0x3857d4){_0x599e1e=_0x599e1e-0x0;let _0x2214d7=a6_0x3857[_0x599e1e];return _0x2214d7;};'use strict';var __awaiter=this&&this[a6_0x2214('0x7')]||function(_0x1c79d3,_0x2e4fe9,_0x6decdd,_0x2d69ae){function _0x21aaa2(_0x596e31){return _0x596e31 instanceof _0x6decdd?_0x596e31:new _0x6decdd(function(_0x2d4904){_0x2d4904(_0x596e31);});}return new(_0x6decdd||(_0x6decdd=Promise))(function(_0x56c2ca,_0x1538a6){function _0x5b23a4(_0x3efc79){try{_0x3058d9(_0x2d69ae[a6_0x2214('0x15')](_0x3efc79));}catch(_0x3b23fa){_0x1538a6(_0x3b23fa);}}function _0x54c63d(_0x3b19d5){try{_0x3058d9(_0x2d69ae['throw'](_0x3b19d5));}catch(_0x274122){_0x1538a6(_0x274122);}}function _0x3058d9(_0x25faf2){_0x25faf2[a6_0x2214('0x25')]?_0x56c2ca(_0x25faf2[a6_0x2214('0x27')]):_0x21aaa2(_0x25faf2[a6_0x2214('0x27')])[a6_0x2214('0x26')](_0x5b23a4,_0x54c63d);}_0x3058d9((_0x2d69ae=_0x2d69ae[a6_0x2214('0x1b')](_0x1c79d3,_0x2e4fe9||[]))[a6_0x2214('0x15')]());});};Object[a6_0x2214('0x13')](exports,a6_0x2214('0x1c'),{'value':!![]});exports['createStartRequest']=exports[a6_0x2214('0xb')]=void 0x0;const axios_1=require(a6_0x2214('0xf'));const environment_1=require(a6_0x2214('0xa'));const metric_logger_1=require(a6_0x2214('0x0'));const serializer_overrides_1=require(a6_0x2214('0x2f'));const {output,unparse}=require(a6_0x2214('0x19'));class DistributedExecutionApi{constructor(_0x397892){this[a6_0x2214('0x2e')]=(0x0,axios_1[a6_0x2214('0x1a')])(_0x397892);}[a6_0x2214('0x21')](_0x1155d6){var _0x4928c4;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x380316=(0x0,metric_logger_1['createMetricRecorder'])(a6_0x2214('0x10'));let _0x3d15f9;try{_0x3d15f9=yield(0x0,axios_1[a6_0x2214('0x9')])(()=>this[a6_0x2214('0x2e')][a6_0x2214('0x28')](a6_0x2214('0x8'),_0x1155d6));_0x380316[a6_0x2214('0xc')]((0x0,metric_logger_1[a6_0x2214('0x1')])(_0x3d15f9));}catch(_0x255a4a){_0x380316['recordMetric'](((_0x4928c4=_0x255a4a===null||_0x255a4a===void 0x0?void 0x0:_0x255a4a[a6_0x2214('0x2b')])===null||_0x4928c4===void 0x0?void 0x0:_0x4928c4[a6_0x2214('0x12')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x255a4a[a6_0x2214('0x2b')][a6_0x2214('0x12')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x255a4a;}if(!_0x3d15f9[a6_0x2214('0x1e')][a6_0x2214('0x29')]){throw new Error(a6_0x2214('0x1d'));}if(_0x3d15f9[a6_0x2214('0x1e')][a6_0x2214('0x17')]){throw new Error(_0x3d15f9[a6_0x2214('0x1e')][a6_0x2214('0x17')]);}return _0x3d15f9[a6_0x2214('0x1e')]['id'];});}[a6_0x2214('0xe')](_0x6042af){var _0x2bed14;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3565df=(0x0,metric_logger_1[a6_0x2214('0x20')])(a6_0x2214('0x24'));try{const _0x4258ef=yield(0x0,axios_1[a6_0x2214('0x9')])(()=>this[a6_0x2214('0x2e')][a6_0x2214('0x28')](a6_0x2214('0x16'),{'id':_0x6042af}));_0x3565df[a6_0x2214('0xc')]((0x0,metric_logger_1[a6_0x2214('0x1')])(_0x4258ef));return _0x4258ef[a6_0x2214('0x1e')];}catch(_0x43a24a){_0x3565df['recordMetric'](((_0x2bed14=_0x43a24a===null||_0x43a24a===void 0x0?void 0x0:_0x43a24a[a6_0x2214('0x2b')])===null||_0x2bed14===void 0x0?void 0x0:_0x2bed14[a6_0x2214('0x12')])?(0x0,metric_logger_1[a6_0x2214('0x1')])(_0x43a24a[a6_0x2214('0x2b')][a6_0x2214('0x12')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);output[a6_0x2214('0x17')]({'title':_0x43a24a[a6_0x2214('0x5')]});process['exit'](0x1);}});}['completeRunGroupWithError'](_0x49ee80,_0x166a3d){var _0x17e17d;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3646a7=(0x0,metric_logger_1[a6_0x2214('0x20')])(a6_0x2214('0x2c'));try{const _0x79117b=yield(0x0,axios_1[a6_0x2214('0x9')])(()=>this[a6_0x2214('0x2e')]['post'](a6_0x2214('0x6'),{'runGroup':_0x49ee80,'criticalErrorMessage':_0x166a3d}),0x3);_0x3646a7[a6_0x2214('0xc')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x79117b));}catch(_0x303cf3){_0x3646a7[a6_0x2214('0xc')](((_0x17e17d=_0x303cf3===null||_0x303cf3===void 0x0?void 0x0:_0x303cf3[a6_0x2214('0x2b')])===null||_0x17e17d===void 0x0?void 0x0:_0x17e17d[a6_0x2214('0x12')])?(0x0,metric_logger_1[a6_0x2214('0x1')])(_0x303cf3[a6_0x2214('0x2b')]['response']):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);}});}}exports[a6_0x2214('0xb')]=DistributedExecutionApi;function createStartRequest(_0x21f75d,_0x40dfce,_0x33559f){const _0x50e906=_0x40dfce['map'](_0x3441bb=>{return _0x3441bb['map'](_0x2e4602=>{return{'taskId':_0x2e4602['id'],'hash':_0x2e4602[a6_0x2214('0x18')],'projectName':_0x2e4602[a6_0x2214('0x4')][a6_0x2214('0x2a')],'target':_0x2e4602[a6_0x2214('0x4')][a6_0x2214('0x4')],'configuration':_0x2e4602[a6_0x2214('0x4')][a6_0x2214('0x2d')]||null,'params':(0x0,serializer_overrides_1['serializeOverrides'])(_0x2e4602)};});});const _0x13df5={'command':(0x0,environment_1[a6_0x2214('0x3')])(),'branch':(0x0,environment_1[a6_0x2214('0x22')])(),'runGroup':_0x21f75d,'tasks':_0x50e906,'maxParallel':calculateMaxParallel(_0x33559f)};if(environment_1[a6_0x2214('0xd')]){_0x13df5[a6_0x2214('0x23')]=environment_1[a6_0x2214('0xd')];}if(!environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE']){_0x13df5['stopAgentsOnFailure']=![];}return _0x13df5;}exports[a6_0x2214('0x14')]=createStartRequest;function calculateMaxParallel(_0x69609a){if(_0x69609a[a6_0x2214('0x1f')]===a6_0x2214('0x11')||_0x69609a[a6_0x2214('0x1f')]===![]){return 0x1;}else if(_0x69609a[a6_0x2214('0x1f')]==='true'||_0x69609a[a6_0x2214('0x1f')]===!![]){return Number(_0x69609a[a6_0x2214('0x2')]||0x3);}else if(_0x69609a[a6_0x2214('0x1f')]===undefined){return _0x69609a[a6_0x2214('0x2')]?Number(_0x69609a['maxParallel']):0x3;}else{return Number(_0x69609a['parallel'])||0x3;}}